<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Order Management | FoodExec Admin</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com" rel="stylesheet" />
    <style>
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f8fafc;
            background-image: radial-gradient(#e2e8f0 0.5px, transparent 0.5px);
            background-size: 24px 24px;
        }
        .bento-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(8px);
            border: 1px solid #ffffff;
        }
    </style>
</head>
<body class="min-h-screen antialiased text-slate-900">

    <div class="max-w-7xl mx-auto px-4 py-10">
        
        <!-- --- üåà TOP NAVIGATION & STATS --- -->
        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-12">
            <div>
                <nav class="flex items-center gap-2 mb-3">
                    <span class="w-2 h-2 rounded-full bg-rose-500 animate-pulse"></span>
                    <span class="text-[10px] font-black uppercase tracking-[0.2em] text-slate-400">Live Control Room</span>
                </nav>
                <h1 class="text-4xl font-extrabold tracking-tight text-slate-900">
                    Manage <span class="text-rose-500">Orders</span>
                </h1>
            </div>

            <!-- Light Colored Stats Quickview -->
            <div class="flex gap-4">
                <div class="bg-blue-50 border border-blue-100 px-6 py-3 rounded-2xl">
                    <p class="text-[10px] font-bold text-blue-500 uppercase tracking-wider">Total Orders</p>
                    <p class="text-2xl font-black text-blue-700" th:text="${orders != null ? orders.size() : '0'}">0</p>
                </div>
                <div class="bg-emerald-50 border border-emerald-100 px-6 py-3 rounded-2xl">
                    <p class="text-[10px] font-bold text-emerald-500 uppercase tracking-wider">System Status</p>
                    <p class="text-2xl font-black text-emerald-700">Online</p>
                </div>
            </div>
        </div>

        <!-- --- üìã MAIN ORDERS TABLE --- -->
        <div class="bento-card rounded-[2.5rem] shadow-2xl shadow-slate-200/60 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full border-collapse">
                    <thead>
                        <tr class="bg-slate-50/50">
                            <th class="px-8 py-6 text-left text-[11px] font-black uppercase tracking-widest text-slate-400 border-b border-slate-100">Order Reference</th>
                            <th class="px-8 py-6 text-left text-[11px] font-black uppercase tracking-widest text-slate-400 border-b border-slate-100">Client ID</th>
                            <th class="px-8 py-6 text-left text-[11px] font-black uppercase tracking-widest text-slate-400 border-b border-slate-100">Current Status</th>
                            <th class="px-8 py-6 text-left text-[11px] font-black uppercase tracking-widest text-slate-400 border-b border-slate-100">Revenue</th>
                            <th class="px-8 py-6 text-center text-[11px] font-black uppercase tracking-widest text-slate-400 border-b border-slate-100">Operation</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-50">
                        
                        <!-- üö´ EMPTY STATE -->
                        <tr th:if="${orders == null or #lists.isEmpty(orders)}">
                            <td colspan="5" class="py-24 text-center">
                                <div class="text-5xl mb-4">‚òÅÔ∏è</div>
                                <h3 class="text-xl font-bold text-slate-800">The kitchen is quiet</h3>
                                <p class="text-slate-400">No active orders found in the database.</p>
                            </td>
                        </tr>

                        <!-- ‚úÖ DATA ROW -->
                        <tr th:each="o : ${orders}" class="group hover:bg-white transition-all">
                            
                            <td class="px-8 py-6">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-2xl bg-slate-900 flex items-center justify-center text-white font-bold text-xs shadow-lg" 
                                         th:text="${'#' + (o.orderId ?: '0')}"></div>
                                    <div>
                                        <p class="text-sm font-bold text-slate-900">Premium Order</p>
                                        <p class="text-[10px] font-medium text-slate-400" th:text="${o.orderDate != null ? #temporals.format(o.orderDate, 'dd MMM, HH:mm') : 'Date Pending'}"></p>
                                    </div>
                                </div>
                            </td>

                            <td class="px-8 py-6">
                                <span class="px-3 py-1 bg-slate-100 rounded-lg text-xs font-bold text-slate-600" th:text="${'USER-' + (o.customerId ?: '0')}"></span>
                            </td>

                            <td class="px-8 py-6">
                                <div th:with="statusStr=${o.orderStatus != null ? #strings.toString(o.orderStatus) : ''}">
                                    <span class="inline-flex items-center gap-1.5 px-4 py-2 rounded-xl text-[10px] font-black tracking-tighter uppercase border shadow-sm"
                                          th:classappend="${statusStr == 'DELIVERED' ? 'bg-emerald-50 text-emerald-600 border-emerald-100' : 
                                                           (statusStr == 'CANCELLED' ? 'bg-rose-50 text-rose-600 border-rose-100' : 'bg-amber-50 text-amber-600 border-amber-100')}"
                                          th:text="${o.orderStatus ?: 'PENDING'}">
                                    </span>
                                </div>
                            </td>

                            <td class="px-8 py-6">
                                <div class="flex flex-col">
                                    <span class="text-base font-black text-slate-900" th:text="${'‚Çπ' + (o.totalAmount ?: '0.00')}"></span>
                                    <span class="text-[9px] font-bold text-slate-400 uppercase tracking-tight" th:text="${o.paymentId != null ? 'TXN: ' + o.paymentId : 'Unpaid'}"></span>
                                </div>
                            </td>

                            <td class="px-8 py-6 text-center">
                                <form th:action="@{/admin/orders/update/{id}(id=${o.orderId})}" method="post">
                                    <button type="submit" class="bg-white border border-slate-200 hover:border-rose-500 hover:bg-rose-500 hover:text-white px-6 py-3 rounded-2xl text-xs font-black text-slate-700 transition-all active:scale-95 shadow-sm">
                                        Update Progress
                                    </button>
                                </form>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- --- üîô BOTTOM NAVIGATION --- -->
        <div class="mt-12 flex flex-col sm:flex-row justify-between items-center gap-6">
            <a th:href="@{/admin/dashboard}" class="px-8 py-4 bg-white border border-slate-200 rounded-2xl text-sm font-bold text-slate-500 hover:text-rose-500 hover:border-rose-200 transition-all flex items-center gap-2">
                <span>‚Üê</span> Back to Dashboard
            </a>
            <div class="flex items-center gap-2 text-[10px] font-black text-slate-300 uppercase tracking-[0.3em]">
                Secure Admin Environment <span class="w-1 h-1 rounded-full bg-slate-300"></span> 2026
            </div>
        </div>
    </div>

</body>
</html>
